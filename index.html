<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ•°æ®æ²»ç†ä¸æ™ºèƒ½ä½“å¹³å° - äº§å“åŸå‹</title>
    <style>
        :root {
            --sidebar-bg: #1e293b;
            --main-bg: #f3f4f6;
            --card-bg: #ffffff;
            --primary: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #e5e7eb;
        }

        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', Roboto, sans-serif; background: var(--main-bg); color: #333; overflow: hidden; }
        
        /* å¸ƒå±€ */
        .container { display: flex; height: 100vh; }
        .sidebar { width: 240px; background: var(--sidebar-bg); color: white; display: flex; flex-direction: column; padding: 20px; }
        .main-content { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
        
        /* ä¾§è¾¹æ  */
        .logo { font-size: 20px; font-weight: bold; margin-bottom: 40px; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        .nav-item { padding: 12px 15px; cursor: pointer; border-radius: 8px; margin-bottom: 5px; color: #94a3b8; display: flex; align-items: center; gap: 10px; transition: 0.3s; }
        .nav-item:hover, .nav-item.active { background: rgba(255,255,255,0.1); color: white; }
        .nav-icon { width: 20px; text-align: center; }

        /* é¡¶éƒ¨æ  */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .header h2 { margin: 0; font-size: 24px; }
        .user-profile { display: flex; align-items: center; gap: 10px; font-size: 14px; color: #666; }

        /* é€‰é¡¹å¡å†…å®¹æ§åˆ¶ */
        .tab-content { display: none; animation: fadeIn 0.4s; flex: 1; }
        .tab-content.active { display: flex; flex-direction: column; gap: 20px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* å¡ç‰‡é€šç”¨æ ·å¼ */
        .card { background: var(--card-bg); border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); border: 1px solid var(--border); }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px; }
        .card-title { font-weight: 600; font-size: 16px; color: #1f2937; }
        
        /* === åŠŸèƒ½æ¨¡å— 1ï¼šå…¨åŸŸæ•°æ®æ¥å…¥ç›‘æ§ === */
        .system-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
        .sys-card { border: 1px solid var(--border); border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: space-between; }
        .sys-status { width: 10px; height: 10px; border-radius: 50%; }
        .status-ok { background: var(--success); box-shadow: 0 0 8px var(--success); }
        .status-sync { background: var(--primary); animation: pulse 1.5s infinite; }

        /* === åŠŸèƒ½æ¨¡å— 2ï¼šæ™ºèƒ½è´¨æ£€ (Table) === */
        .data-table { width: 100%; border-collapse: collapse; font-size: 14px; }
        .data-table th { text-align: left; padding: 12px; background: #f8fafc; color: #64748b; font-weight: 600; }
        .data-table td { padding: 12px; border-bottom: 1px solid var(--border); }
        .error-cell { background: #fef2f2; color: var(--danger); position: relative; cursor: pointer; border: 1px dashed var(--danger); font-weight: bold; }
        
        /* æ™ºèƒ½å»ºè®®æµ®å±‚ */
        .ai-suggestion-box {
            position: absolute; top: 40px; left: 0; z-index: 10;
            background: white; border: 1px solid var(--primary); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            width: 280px; padding: 12px; border-radius: 8px; display: none;
        }
        .ai-suggestion-box.show { display: block; }
        .suggestion-header { font-size: 12px; color: var(--primary); font-weight: bold; margin-bottom: 5px; display: flex; align-items: center; gap: 5px; }
        .btn-fix { background: var(--primary); color: white; border: none; padding: 4px 10px; border-radius: 4px; font-size: 12px; cursor: pointer; margin-top: 8px; float: right; }

        /* === åŠŸèƒ½æ¨¡å— 3ï¼šé”€å”®ç«¯é‡‡é›† (æ¨¡æ‹Ÿæ‰‹æœº) === */
        .mobile-simulator {
            width: 320px; height: 500px; border: 10px solid #333; border-radius: 25px; background: #fff;
            margin: 0 auto; display: flex; flex-direction: column; overflow: hidden; position: relative;
        }
        .chat-area { flex: 1; background: #f1f5f9; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .chat-bubble { max-width: 80%; padding: 10px; border-radius: 12px; font-size: 13px; line-height: 1.4; }
        .bubble-ai { align-self: flex-start; background: white; border: 1px solid #e2e8f0; }
        .bubble-user { align-self: flex-end; background: var(--primary); color: white; }
        .chat-input-area { padding: 10px; border-top: 1px solid #ddd; display: flex; gap: 5px; align-items: center; }
        .chat-input { flex: 1; border: 1px solid #ddd; padding: 8px; border-radius: 20px; outline: none; font-size: 12px; }
        .upload-btn { color: #64748b; font-size: 18px; cursor: pointer; }
        
        .upload-preview { 
            width: 100px; height: 60px; background: #e2e8f0; margin-top: 5px; border-radius: 5px; 
            display: flex; align-items: center; justify-content: center; font-size: 10px; color: #64748b;
        }

        /* === åŠŸèƒ½æ¨¡å— 4ï¼šæ™ºèƒ½é—®ç­” BI === */
        .ai-search-bar { width: 100%; padding: 15px 20px; border: 2px solid var(--primary); border-radius: 30px; font-size: 16px; outline: none; transition: 0.3s; box-shadow: 0 4px 6px rgba(59, 130, 246, 0.1); }
        .chart-container { height: 250px; display: flex; align-items: end; justify-content: space-around; padding-top: 30px; gap: 20px; }
        .bar { width: 40px; background: var(--primary); transition: height 1s; border-radius: 4px 4px 0 0; position: relative; }
        .bar:hover::after { content: attr(data-val); position: absolute; top: -25px; left: 0; width: 100%; text-align: center; font-size: 12px; font-weight: bold; }

        /* åŠ¨ç”»ç±» */
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

    </style>
</head>
<body>

    <div class="container">
        <div class="sidebar">
            <div class="logo">âš¡ DataAgent.AI</div>
            <div class="nav-item active" onclick="switchTab('collection')">
                <span class="nav-icon">ğŸ“Š</span> æ•°æ®æ²»ç†å·¥ä½œå°
            </div>
            <div class="nav-item" onclick="switchTab('mobile')">
                <span class="nav-icon">ğŸ“±</span> é”€å”®é‡‡é›†æ¨¡æ‹Ÿ
            </div>
            <div class="nav-item" onclick="switchTab('bi')">
                <span class="nav-icon">ğŸ§ </span> æ™ºèƒ½ç»è¥æ´å¯Ÿ
            </div>
            <div style="margin-top: auto; font-size: 12px; color: #64748b;">
                ç³»ç»ŸçŠ¶æ€: åœ¨çº¿<br>
                å…¨åŸŸåŒæ­¥: 10åˆ†é’Ÿå‰
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <h2 id="page-title">æ•°æ®æ”¶é›†ä¸æ²»ç†ä¸­å¿ƒ</h2>
                <div class="user-profile">
                    <span>ğŸ‘¤ ç®¡ç†å‘˜: Alex</span>
                    <button style="padding: 5px 10px; background:white; border:1px solid #ddd; border-radius:4px; cursor:pointer;">è®¾ç½®</button>
                </div>
            </div>

            <div id="tab-collection" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">å…¨åŸŸæ•°æ®æ¥å…¥çŠ¶æ€ (åŠ¨æ€åˆ·æ–°)</div>
                        <button style="font-size:12px; color:var(--primary); background:none; border:none; cursor:pointer;">ğŸ”„ ç«‹å³åˆ·æ–°</button>
                    </div>
                    <div class="system-grid">
                        <div class="sys-card">
                            <div><strong>CRM ç³»ç»Ÿ</strong><br><span style="font-size:12px; color:#666;">Salesforce</span></div>
                            <div class="sys-status status-ok" title="æ­£å¸¸"></div>
                        </div>
                        <div class="sys-card">
                            <div><strong>ERP ç³»ç»Ÿ</strong><br><span style="font-size:12px; color:#666;">SAP</span></div>
                            <div class="sys-status status-ok" title="æ­£å¸¸"></div>
                        </div>
                        <div class="sys-card">
                            <div><strong>è´¢åŠ¡ç³»ç»Ÿ</strong><br><span style="font-size:12px; color:#666;">Kingdee</span></div>
                            <div class="sys-status status-sync" title="æ­£åœ¨åŒæ­¥"></div>
                        </div>
                        <div class="sys-card">
                            <div><strong>é”€å”®ç«¯ä¸Šä¼ </strong><br><span style="font-size:12px; color:#666;">Unstructured</span></div>
                            <div class="sys-status status-ok" title="æ­£å¸¸"></div>
                        </div>
                    </div>
                </div>

                <div class="card" style="flex:1;">
                    <div class="card-header">
                        <div class="card-title">âœ¨ æ™ºèƒ½è´¨æ£€ä¸é¢„å¤„ç†é˜Ÿåˆ—</div>
                        <div style="font-size:12px; color:#666;">AIå·²è‡ªåŠ¨æ£€æµ‹åˆ° 1 ä¸ªå¼‚å¸¸ç©ºå€¼</div>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>æ•°æ®æ¥æº</th>
                                <th>å®¢æˆ·åç§°</th>
                                <th>åˆåŒé‡‘é¢ (CNY)</th>
                                <th>å›æ¬¾çŠ¶æ€</th>
                                <th>AI è´¨æ£€çŠ¶æ€</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CRM (Auto)</td>
                                <td>è…¾è®¯ç§‘æŠ€</td>
                                <td>1,200,000</td>
                                <td><span style="color:green">å·²å›æ¬¾</span></td>
                                <td>âœ… é€šè¿‡</td>
                            </tr>
                            <tr>
                                <td>é”€å”®è¯­éŸ³ (AIæå–)</td>
                                <td>å­—èŠ‚è·³åŠ¨</td>
                                <td class="error-cell" onclick="toggleSuggestion(this)">
                                    [ç©ºå€¼] âš ï¸
                                    <div class="ai-suggestion-box">
                                        <div class="suggestion-header">ğŸ¤– AI æ™ºèƒ½ä¿®å¤å»ºè®®</div>
                                        <div style="font-size:12px; margin-bottom:5px;">æ£€æµ‹åˆ°ç©ºå€¼ã€‚æ ¹æ®å†å²åˆåŒåŠè¯­éŸ³è¯­ä¹‰åˆ†æï¼š</div>
                                        <div style="background:#f0f9ff; padding:5px; border-radius:4px; font-weight:bold; color:#0369a1;">é¢„æµ‹å€¼: 850,000</div>
                                        <div style="font-size:10px; color:#666; margin-top:3px;">é€»è¾‘: è¯­éŸ³æåˆ°"å…«åäº”ä¸‡"</div>
                                        <button class="btn-fix" onclick="fixData(event, this)">åº”ç”¨ AI ä¿®å¤</button>
                                    </div>
                                </td>
                                <td>æœªå›æ¬¾</td>
                                <td><span style="color:var(--warning)">å¾…å¤„ç†</span></td>
                            </tr>
                            <tr>
                                <td>å›¾ç‰‡è¯†åˆ« (OCR)</td>
                                <td>é˜¿é‡Œå·´å·´</td>
                                <td>450,000</td>
                                <td>éƒ¨åˆ†å›æ¬¾</td>
                                <td>âœ… é€šè¿‡</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="tab-mobile" class="tab-content" style="align-items: center;">
                <h3 style="text-align:center;">æ¨¡æ‹Ÿé”€å”®äººå‘˜è§†è§’ï¼šAI åŠ©æ‰‹</h3>
                <p style="text-align:center; font-size:12px; color:#666; margin-top:-10px;">è§£å†³ç—›ç‚¹ï¼šé”€å”®æ— éœ€å¡«è¡¨ï¼Œç›´æ¥å‘è¯­éŸ³æˆ–å›¾ç‰‡ï¼ŒAIè‡ªåŠ¨è½¬ä¸ºç»“æ„åŒ–æ•°æ®ã€‚</p>
                
                <div class="mobile-simulator">
                    <div style="background:#f8fafc; padding:10px; border-bottom:1px solid #eee; text-align:center; font-weight:bold; font-size:14px;">
                        æ•°æ®é‡‡é›†åŠ©æ‰‹
                    </div>
                    <div class="chat-area" id="chatArea">
                        <div class="chat-bubble bubble-ai">
                            ğŸ‘‹ æ—©ä¸Šå¥½ï¼è¯·ä¸Šä¼ ä»Šæ—¥çš„é¡¹ç›®è¿›åº¦æˆ–åˆåŒæ–‡ä»¶ã€‚
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <span class="upload-btn" title="ä¸Šä¼ å›¾ç‰‡/æ–‡ä»¶" onclick="simulateUpload()">ğŸ“·</span>
                        <input type="text" class="chat-input" placeholder="å‘æ¶ˆæ¯æˆ–è¯­éŸ³..." id="mobileInput" onkeypress="handleMobileEnter(event)">
                        <button onclick="sendMobileMsg()" style="border:none; background:var(--primary); color:white; border-radius:50%; width:30px; height:30px;">â†‘</button>
                    </div>
                </div>
                
                <div style="margin-top:20px; display:flex; gap:10px;">
                    <button onclick="demoScenario('voice')" class="card" style="cursor:pointer; padding:10px;">ğŸ¤ æ¨¡æ‹Ÿè¯­éŸ³è¾“å…¥</button>
                    <button onclick="demoScenario('image')" class="card" style="cursor:pointer; padding:10px;">ğŸ–¼ï¸ æ¨¡æ‹ŸåˆåŒæ‹ç…§</button>
                </div>
            </div>

            <div id="tab-bi" class="tab-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h1 style="color: var(--primary); margin-bottom: 10px;">Ask Data Anything</h1>
                    <p style="color: #666;">åŸºäºé¢„å¤„ç†æ•°æ®ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼Œæ— éœ€åšè¡¨ã€‚</p>
                </div>

                <div style="max-width: 800px; margin: 0 auto; width: 100%;">
                    <div style="position:relative;">
                        <input type="text" class="ai-search-bar" placeholder="ä¾‹å¦‚ï¼šå±•ç¤ºQ1å„åˆ†å…¬å¸çš„é”€å”®å›æ¬¾å¯¹æ¯”..." id="biInput">
                        <button onclick="runAnalysis()" style="position:absolute; right:10px; top:10px; height:36px; padding:0 20px; background:var(--primary); color:white; border:none; border-radius:20px; cursor:pointer;">ç”Ÿæˆåˆ†æ</button>
                    </div>

                    <div id="bi-result" class="card" style="margin-top: 30px; display: none;">
                        <div class="card-header">
                            <div class="card-title">ğŸ“Š åˆ†æç»“æœï¼šQ1 åˆ†å…¬å¸å›æ¬¾å¯¹æ¯”</div>
                            <div style="font-size:12px; color:#666;">AI å“åº”æ—¶é—´: 0.8s (åŸºäºé¢„å¤„ç†ç¼“å­˜)</div>
                        </div>
                        <div class="chart-container">
                            <div class="bar" style="height: 0%; background: #93c5fd;" data-height="60%" data-val="600ä¸‡"><span style="position:absolute; bottom:-25px; left:5px; font-size:12px;">åŒ—äº¬</span></div>
                            <div class="bar" style="height: 0%; background: #3b82f6;" data-height="85%" data-val="850ä¸‡"><span style="position:absolute; bottom:-25px; left:5px; font-size:12px;">ä¸Šæµ·</span></div>
                            <div class="bar" style="height: 0%; background: #60a5fa;" data-height="45%" data-val="450ä¸‡"><span style="position:absolute; bottom:-25px; left:5px; font-size:12px;">å¹¿å·</span></div>
                            <div class="bar" style="height: 0%; background: #2563eb;" data-height="95%" data-val="950ä¸‡"><span style="position:absolute; bottom:-25px; left:5px; font-size:12px;">æ·±åœ³</span></div>
                        </div>
                        <div style="margin-top: 30px; background: #f0f9ff; padding: 15px; border-radius: 8px; font-size: 14px; border-left: 4px solid var(--primary);">
                            <strong>ğŸ’¡ AI æ´å¯Ÿï¼š</strong> æ·±åœ³åˆ†å…¬å¸è¡¨ç°æœ€ä½³ï¼ŒåŒæ¯”å¢é•¿ 25%ã€‚å¹¿å·åˆ†å…¬å¸å›æ¬¾ä½äºé¢„æœŸï¼Œå»ºè®®æŸ¥çœ‹è¯¥åŒºé‡ç‚¹å®¢æˆ·â€œåå—ç”µå­â€çš„åˆåŒè¿›åº¦ã€‚
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // é¡µé¢åˆ‡æ¢é€»è¾‘
        function switchTab(tabId) {
            // Update Sidebar
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // Update Title
            const titles = {
                'collection': 'æ•°æ®æ”¶é›†ä¸æ²»ç†ä¸­å¿ƒ',
                'mobile': 'ç§»åŠ¨ç«¯é‡‡é›†æ¨¡æ‹Ÿ (é¢å‘é”€å”®)',
                'bi': 'æ™ºèƒ½ç»è¥æ´å¯Ÿ'
            };
            document.getElementById('page-title').innerText = titles[tabId];

            // Update Content
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
        }

        // --- åŠŸèƒ½ 1: æ™ºèƒ½è´¨æ£€äº¤äº’ ---
        function toggleSuggestion(element) {
            const box = element.querySelector('.ai-suggestion-box');
            // Close others
            document.querySelectorAll('.ai-suggestion-box').forEach(b => {
                if(b !== box) b.classList.remove('show');
            });
            box.classList.toggle('show');
            event.stopPropagation();
        }

        function fixData(e, btn) {
            e.stopPropagation();
            const cell = btn.closest('.error-cell');
            cell.classList.remove('error-cell');
            cell.style.color = 'black';
            cell.style.background = 'transparent';
            cell.style.border = 'none';
            cell.innerHTML = '850,000 <span style="font-size:10px; color:green; background:#ecfdf5; padding:2px;">(AIå·²ä¿®å¤)</span>';
            
            // Update status cell next to it
            const row = cell.parentElement;
            row.lastElementChild.innerHTML = '<span style="color:green">âœ… å·²ä¿®å¤</span>';
            alert("AI å·²æ ¹æ®è¯­éŸ³è®°å½•è‡ªåŠ¨å¡«è¡¥ç©ºç¼ºæ•°æ®ï¼");
        }

        // --- åŠŸèƒ½ 2: ç§»åŠ¨ç«¯æ¨¡æ‹Ÿé€»è¾‘ ---
        function appendMsg(text, type, isImage = false) {
            const chatArea = document.getElementById('chatArea');
            const div = document.createElement('div');
            div.className = `chat-bubble bubble-${type}`;
            if (isImage) {
                div.innerHTML = `å·²å‘é€å›¾ç‰‡<div class="upload-preview">ğŸ“„ åˆåŒæ‰«æä»¶.jpg</div>`;
            } else {
                div.innerText = text;
            }
            chatArea.appendChild(div);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function sendMobileMsg() {
            const input = document.getElementById('mobileInput');
            if(input.value.trim() === "") return;
            appendMsg(input.value, 'user');
            input.value = '';
            
            setTimeout(() => {
                appendMsg("æ­£åœ¨è§£æ...", 'ai');
            }, 500);
            
            setTimeout(() => {
                document.getElementById('chatArea').lastElementChild.remove(); // remove 'parsing'
                appendMsg("âœ… è§£ææˆåŠŸï¼å·²æå–ï¼š\nå®¢æˆ·ï¼šæœªçŸ¥å®¢æˆ·\né‡‘é¢ï¼šå¾…ç¡®è®¤\nå·²è‡ªåŠ¨å¡«å…¥åº•è¡¨ã€‚", 'ai');
            }, 1500);
        }

        function demoScenario(type) {
            const chatArea = document.getElementById('chatArea');
            chatArea.innerHTML = '<div class="chat-bubble bubble-ai">ğŸ‘‹ æ—©ä¸Šå¥½ï¼è¯·ä¸Šä¼ ä»Šæ—¥çš„é¡¹ç›®è¿›åº¦æˆ–åˆåŒæ–‡ä»¶ã€‚</div>'; // Reset

            if (type === 'voice') {
                setTimeout(() => appendMsg("ğŸ¤ [è¯­éŸ³æ¶ˆæ¯ 5s] \"å­—èŠ‚è·³åŠ¨çš„é¡¹ç›®ä»Šå¤©ç¡®å®šå›æ¬¾å…«åäº”ä¸‡äº†ï¼ŒæŠŠçŠ¶æ€æ›´æ–°ä¸€ä¸‹ã€‚\"", 'user'), 500);
                setTimeout(() => appendMsg("ğŸ¤– æ­£åœ¨è¿›è¡Œè¯­éŸ³è½¬æ–‡å­—ä¸æ„å›¾è¯†åˆ«...", 'ai'), 1500);
                setTimeout(() => appendMsg("âœ… **æå–æˆåŠŸ**\nå®¢æˆ·ï¼šå­—èŠ‚è·³åŠ¨\né‡‘é¢ï¼š850,000\næ“ä½œï¼šæ›´æ–°å›æ¬¾çŠ¶æ€\næ•°æ®å·²åŒæ­¥è‡³æ²»ç†ä¸­å¿ƒã€‚", 'ai'), 3000);
            } else if (type === 'image') {
                setTimeout(() => appendMsg("", 'user', true), 500);
                setTimeout(() => appendMsg("ğŸ¤– OCR è¯†åˆ«ä¸­...", 'ai'), 1500);
                setTimeout(() => appendMsg("âœ… **æå–æˆåŠŸ (æ–‡æ¡£ç»“æ„åŒ–)**\næ£€æµ‹åˆ°åˆåŒç¼–å·: CT-2024001\né‡‘é¢: 450,000\næ¡æ¬¾æ— å¼‚å¸¸ã€‚\nå·²å­˜å…¥æ•°æ®åº“ã€‚", 'ai'), 3000);
            }
        }

        // --- åŠŸèƒ½ 3: BI å›¾è¡¨æ¨¡æ‹Ÿ ---
        function runAnalysis() {
            const resultArea = document.getElementById('bi-result');
            const bars = document.querySelectorAll('.bar');
            
            // Hide first to reset
            resultArea.style.display = 'none';
            bars.forEach(b => b.style.height = '0%');

            const btn = document.querySelector('#tab-bi button');
            const originalText = btn.innerText;
            btn.innerText = "AI æ€è€ƒä¸­...";
            
            setTimeout(() => {
                resultArea.style.display = 'block';
                btn.innerText = originalText;
                
                // Animate bars
                setTimeout(() => {
                    bars.forEach(b => {
                        b.style.height = b.getAttribute('data-height');
                    });
                }, 100);
            }, 1000);
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const isClickInside = event.target.closest('.error-cell');
            if (!isClickInside) {
                document.querySelectorAll('.ai-suggestion-box').forEach(b => b.classList.remove('show'));
            }
        });

    </script>
</body>
</html>